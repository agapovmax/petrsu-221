GAS LISTING task5.S 			page 1


   1              	/*
   2              	 * –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–∞ b(i) = A(k,i) + A(i,l)
   3              	 * –≥–¥–µ A - –∫–≤–∞–¥—Ä–∞—Ç–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ 6x6 —Å 4-–±–∞–π—Ç–æ–≤—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
   4              	 * k –∏ l –≤–≤–æ–¥—è—Ç—Å—è –∏–∑ stdin
   5              	 * –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: echo -e "2\n4\n" | ./vector_calc
   6              	 */
   7              	
   8              	.include "my-macro"
   1              	/*
   2              	 * –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.
   3              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
   4              	 *     - –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
   5              	 *
   6              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
   7              	 * –°–º. —Ç–∞–∫–∂–µ 'man 2 exit'
   8              	*/
   9              	.macro Exit ret_val
  10              	    movl $1, %eax         # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ exit
  11              	    movl \ret_val, %ebx     # –∫–æ–¥ –≤—ã—Ö–æ–¥–∞
  12              	    int $0x80         # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  13              	.endm
  14              	
  15              	
  16              	/*
  17              	 * –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ –±–∞–π—Ç–∞ –∫–æ–¥–∞ —Å
  18              	 * —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞
  19              	 * –ù–µ–∫–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–Ω—ã–º –≤—ã–∑–æ–≤–æ–º Linux read, –ø—Ä–µ–¥–Ω–
  20              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
  21              	 *     - –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –±–∞–π—Ç–∞
  22              	 * –†–µ–∑—É–ª—å—Ç–∞—Ç:
  23              	 *    - –≤ %eax –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—á–∏—Ç–∞–Ω–Ω—ã—Ö –±–∞–π—Ç–æ–≤
  24              	 *    - –ø–æ –∞–¥—Ä–µ—Å—É buf_addr - —Å—á–∏—Ç–∞–Ω–Ω—ã–π –±–∞–π—Ç
  25              	 *
  26              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
  27              	 * –°–º. —Ç–∞–∫–∂–µ 'man 2 read'
  28              	*/
  29              	.macro Getchar buf_addr
  30              	    movl $3, %eax        # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ read
  31              	    movl $0, %ebx        # –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ
  32              	    movl \buf_addr, %ecx    # –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ (–æ–Ω –∂–µ - —Ñ–∞–∫—Ç–∏—á
  33              	                     # –ø–∞—Ä–∞–º–µ—Ç—Ä –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞)
  34              	    movl $1, %edx        # –ø–∞—Ä–∞–º–µ—Ç—Ä 3: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è —á—Ç–µ–Ω–∏—
  35              	    int $0x80        # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  36              	.endm
  37              	
  38              	/*
  39              	 * –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è  –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–∞–π–ª —Å—Ç–∞–Ω–¥–∞—Ä—Ç–
  40              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
  41              	 *     - –°—Ç—Ä–æ–∫–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞.
  42              	 *
  43              	 * –ü—Ä–∏–º–µ—Ç—Ä –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞:
  44              	 *    Puts "–¢–µ–∫—Å—Ç –≤—ã–≤–æ–¥–∏–º–æ–π —Å—Ç—Ä–æ–∫–∏"
  45              	 *
  46              	 * –†–µ–∑—É–ª—å—Ç–∞—Ç:
  47              	 *    - –≤—ã–≤–æ–¥–∏—Ç –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ —Å–∏–º–≤–æ–ª—ã –∑–∞–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–
  48              	 *      –∏ –≤—Å–ª–µ–¥ –∑–∞ –Ω–∏–º–∏ —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ \n
  49              	 *
GAS LISTING task5.S 			page 2


  50              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
  51              	 * –°–º. —Ç–∞–∫–∂–µ 'man puts', 'man 2 write'
  52              	*/
  53              	.macro Puts string
  54              	.data
  55              	    str\@:     .ascii "\string\n"  # —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–æ–∫–∏ –
  56              	
  57              	    strlen\@ =     . - str\@           # –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–
  58              	
  59              	.text
  60              	    movl $4, %eax        # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ write
  61              	    movl $1, %ebx        # –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤—ã–≤
  62              	    movl $str\@, %ecx    # –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –ø–∞–º—è—Ç–∏ —Å –≤—ã–≤–æ–¥–∏–º—ã–º–∏ —Å–∏
  63              	    movl $strlen\@, %edx     # –ø–∞—Ä–∞–º–µ—Ç—Ä 3: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è –≤—ã–≤–
  64              	    int $0x80        # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  65              	.endm
   9              	
  10              	.bss
  11              	    .lcomm c, 1                 # –±—É—Ñ–µ—Ä –¥–ª—è —á—Ç–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –±–∞–π—Ç–∞ –∏–∑ stdin
  12              	    .lcomm last_digit, 1        # –±—É—Ñ–µ—Ä –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–≤–µ–¥–µ–
  13              	    .lcomm output_buf, 20       # –±—É—Ñ–µ—Ä –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–º–∞–∫—Å 10 
  14              	
  15              	.data
  16 0000 00000000 	    result_vector: .long 0, 0, 0, 0, 0, 0    # —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π –≤–µ–∫—Ç–æ—Ä (6 —ç–ª–µ–
  16      00000000 
  16      00000000 
  16      00000000 
  16      00000000 
  17              	    # –ú–∞—Ç—Ä–∏—Ü–∞ A —Ä–∞–∑–º–µ—Ä–æ–º 6x6 (4-–±–∞–π—Ç–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã)
  18              	    matrix_A:
  19 0018 0B000000 	        .long 11, 12, 13, 14, 15, 16 # —Å—Ç—Ä–æ–∫–∞ 0 (–±–∞–π—Ç—ã 0-23)
  19      0C000000 
  19      0D000000 
  19      0E000000 
  19      0F000000 
  20 0030 15000000 	        .long 21, 22, 23, 24, 25, 26 # —Å—Ç—Ä–æ–∫–∞ 1 (–±–∞–π—Ç—ã 24-47)
  20      16000000 
  20      17000000 
  20      18000000 
  20      19000000 
  21 0048 1F000000 	        .long 31, 32, 33, 34, 35, 36 # —Å—Ç—Ä–æ–∫–∞ 2 (–±–∞–π—Ç—ã 48-71)
  21      20000000 
  21      21000000 
  21      22000000 
  21      23000000 
  22 0060 29000000 	        .long 41, 42, 43, 44, 45, 46 # –Ω—É —è –ø–æ–Ω—è–ª
  22      2A000000 
  22      2B000000 
  22      2C000000 
  22      2D000000 
  23 0078 33000000 	        .long 51, 52, 53, 54, 55, 56
  23      34000000 
  23      35000000 
  23      36000000 
  23      37000000 
  24 0090 3D000000 	        .long 61, 62, 63, 64, 65, 66
  24      3E000000 
GAS LISTING task5.S 			page 3


  24      3F000000 
  24      40000000 
  24      41000000 
  25              	    
  26 00a8 00000000 	    k_index: .long 0            # –∏–Ω–¥–µ–∫—Å k (–Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏)
  27 00ac 00000000 	    l_index: .long 0            # –∏–Ω–¥–µ–∫—Å l (–Ω–æ–º–µ—Ä —Å—Ç–æ–ª–±—Ü–∞)
  28 00b0 00000000 	    input_stage: .long 0        # —ç—Ç–∞–ø –≤–≤–æ–¥–∞: 0=–≤–≤–æ–¥ k, 1=–≤–≤–æ–¥ l
  29              	
  30              	.text
  31              	.global _start
  32              	
  33              	_start:
  34 0000 90       	    nop                         # –¥–ª—è –æ—Ç–ª–∞–¥—á–∏–∫–∞
  35              	
  36 0001 C705A800 	    movl $0, k_index            # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è k = 0
  36      00000000 
  36      0000
  37 000b C705AC00 	    movl $0, l_index            # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è l = 0
  37      00000000 
  37      0000
  38 0015 C6050100 	    movb $0, last_digit         # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ü–∏—Ñ—Ä—ã
  38      000000
  39 001c C705B000 	    movl $0, input_stage        # –Ω–∞—á–∏–Ω–∞–µ–º —Å –≤–≤–æ–¥–∞ k
  39      00000000 
  39      0000
  40              	
  41              	    Puts "–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ k (0-5) –∏ –Ω–∞–∂–º–∏—Ç–µ Enter:"
  41              	> .data
  41 00b4 D092D0B2 	>  str0:.ascii "–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ k (0-5) –∏ –Ω–∞–∂–º–∏—Ç–µ Enter:\n"
  41      D0B5D0B4 
  41      D0B8D182 
  41      D0B520D0 
  41      B7D0BDD0 
  41              	> 
  41              	>  strlen0 =. - str0
  41              	> 
  41              	> .text
  41 0026 B8040000 	>  movl $4,%eax
  41      00
  41 002b BB010000 	>  movl $1,%ebx
  41      00
  41 0030 B9B40000 	>  movl $str0,%ecx
  41      00
  41 0035 BA410000 	>  movl $strlen0,%edx
  41      00
  41 003a CD80     	>  int $0x80
  42              	
  43              	kbd_input:
  44              	    Getchar $c                  # –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤ –≤–≤–æ–¥–∞ –±–∞–π—Ç–∞ –∏–∑ stdin
  44 003c B8030000 	>  movl $3,%eax
  44      00
  44 0041 BB000000 	>  movl $0,%ebx
  44      00
  44 0046 B9000000 	>  movl $c,%ecx
  44      00
  44              	>  
  44 004b BA010000 	>  movl $1,%edx
GAS LISTING task5.S 			page 4


  44      00
  44 0050 CD80     	>  int $0x80
  45              	
  46 0052 83F800   	    cmpl $0, %eax               # –Ω–∞—Å—Ç—É–ø–∏–ª–æ —Å–æ–±—ã—Ç–∏–µ EOF?
  47 0055 0F84A000 	    je error_no_input           # –î–ê - –æ—à–∏–±–∫–∞, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö
  47      0000
  48              	
  49 005b 803D0000 	    cmpb $'\n', c               # —ç—Ç–æ —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ (Enter)?
  49      00000A
  50 0062 741E     	    je process_enter            # –î–ê - –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å Enter
  51              	
  52 0064 803D0000 	    cmpb $'9', c                # –∫–æ–¥ –±–æ–ª—å—à–µ –∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ '9'?
  52      000039
  53 006b 77CF     	    ja kbd_input                # –î–ê - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º (–Ω–µ —Ü–∏—Ñ—Ä–∞)
  54              	
  55 006d 803D0000 	    cmpb $'0', c                # –∫–æ–¥ –º–µ–Ω—å—à–µ –∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ '0'?
  55      000030
  56 0074 72C6     	    jb kbd_input                # –î–ê - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º (–Ω–µ —Ü–∏—Ñ—Ä–∞)
  57              	
  58              	    # –≠—Ç–æ —Ü–∏—Ñ—Ä–∞ - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ—ë –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω—é—é
  59 0076 A0000000 	    movb c, %al                 # –ø–µ—Ä–µ–¥–∞—Ç—å –∫–æ–¥ —Å–∏–º–≤–æ–ª–∞ —Ü–∏—Ñ—Ä—ã –∏–∑ c –≤ al
  59      00
  60 007b A2010000 	    movb %al, last_digit        # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–≤–µ–¥–µ–Ω–Ω—É—é —Ü–∏—Ñ—Ä
  60      00
  61              	
  62 0080 EBBA     	    jmp kbd_input               # –Ω–∞ –≤–≤–æ–¥ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞
  63              	
  64              	process_enter:
  65              	    # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ –≤ —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  66 0082 0FB60501 	    movzbl last_digit, %eax     # –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–¥ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ü–∏—Ñ—Ä—ã –≤ eax
  66      000000
  67              	
  68              	    # –ü—Ä–æ–≤–µ—Ä–∫–∞: –±—ã–ª–∞ –ª–∏ –≤–≤–µ–¥–µ–Ω–∞ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ —Ü–∏—Ñ—Ä–∞
  69 0089 83F800   	    cmpl $0, %eax               # –µ—Å–ª–∏ –∫–æ–¥ = 0, –∑–Ω–∞—á–∏—Ç —Ü–∏—Ñ—Ä—ã –Ω–µ –±—ã–ª–æ
  70 008c 74AE     	    je kbd_input                # –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç–æ–π Enter
  71              	
  72 008e 83E830   	    subl $'0', %eax             # –≤—ã—á–µ—Å—Ç—å –∫–æ–¥ —Å–∏–º–≤–æ–ª–∞ '0' - –ø–æ–ª—É—á–∏–º —á–∏—Å–
  73              	
  74              	    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0-5)
  75 0091 83F805   	    cmpl $5, %eax               # –ø—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±–æ–ª—å—à–µ –ª–∏ 5
  76 0094 7743     	    ja invalid_index            # –µ—Å–ª–∏ –±–æ–ª—å—à–µ - –æ—à–∏–±–∫–∞
  77              	
  78              	    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–≤–µ–¥–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —ç—Ç–∞–
  79 0096 833DB000 	    cmpl $0, input_stage        # –ø—Ä–æ–≤–µ—Ä—è–µ–º —ç—Ç–∞–ø –≤–≤–æ–¥–∞
  79      000000
  80 009d 7402     	    je save_k_index             # –µ—Å–ª–∏ 0 - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ k
  81 009f EB31     	    jmp save_l_index            # –∏–Ω–∞—á–µ - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ l
  82              	
  83              	save_k_index:
  84 00a1 A3A80000 	    movl %eax, k_index          # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ k
  84      00
  85 00a6 C6050100 	    movb $0, last_digit         # —Å–±—Ä–æ—Å–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Ü–∏—Ñ—Ä—É
  85      000000
  86 00ad C705B000 	    movl $1, input_stage        # –ø–µ—Ä–µ—Ö–æ–¥ –∫ –≤–≤–æ–¥—É l
  86      00000100 
  86      0000
  87              	
GAS LISTING task5.S 			page 5


  88              	    Puts "–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ l (0-5) –∏ –Ω–∞–∂–º–∏—Ç–µ Enter:"
  88              	> .data
  88 00f5 D092D0B2 	>  str2:.ascii "–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ l (0-5) –∏ –Ω–∞–∂–º–∏—Ç–µ Enter:\n"
  88      D0B5D0B4 
  88      D0B8D182 
  88      D0B520D0 
  88      B7D0BDD0 
  88              	> 
  88              	>  strlen2 =. - str2
  88              	> 
  88              	> .text
  88 00b7 B8040000 	>  movl $4,%eax
  88      00
  88 00bc BB010000 	>  movl $1,%ebx
  88      00
  88 00c1 B9F50000 	>  movl $str2,%ecx
  88      00
  88 00c6 BA410000 	>  movl $strlen2,%edx
  88      00
  88 00cb CD80     	>  int $0x80
  89 00cd E96AFFFF 	    jmp kbd_input               # –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤–≤–æ–¥
  89      FF
  90              	
  91              	save_l_index:
  92 00d2 A3AC0000 	    movl %eax, l_index          # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ l
  92      00
  93 00d7 EB44     	    jmp calculate_vector        # –ø–µ—Ä–µ—Ö–æ–¥ –∫ –≤—ã—á–∏—Å–ª–µ–Ω–∏—é –≤–µ–∫—Ç–æ—Ä–∞
  94              	
  95              	invalid_index:
  96              	    Puts "–û—à–∏–±–∫–∞: –∏–Ω–¥–µ–∫—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 0-5"
  96              	> .data
  96 0136 D09ED188 	>  str3:.ascii "–û—à–∏–±–∫–∞: –∏–Ω–¥–µ–∫—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 0-5\n"
  96      D0B8D0B1 
  96      D0BAD0B0 
  96      3A20D0B8 
  96      D0BDD0B4 
  96              	> 
  96              	>  strlen3 =. - str3
  96              	> 
  96              	> .text
  96 00d9 B8040000 	>  movl $4,%eax
  96      00
  96 00de BB010000 	>  movl $1,%ebx
  96      00
  96 00e3 B9360100 	>  movl $str3,%ecx
  96      00
  96 00e8 BA4B0000 	>  movl $strlen3,%edx
  96      00
  96 00ed CD80     	>  int $0x80
  97              	    Exit $1                     # –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏
  97 00ef B8010000 	>  movl $1,%eax
  97      00
  97 00f4 BB010000 	>  movl $1,%ebx
  97      00
  97 00f9 CD80     	>  int $0x80
  98              	
  99              	error_no_input:
GAS LISTING task5.S 			page 6


 100              	    Puts "–û—à–∏–±–∫–∞: –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"
 100              	> .data
 100 0181 D09ED188 	>  str5:.ascii "–û—à–∏–±–∫–∞: –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö\n"
 100      D0B8D0B1 
 100      D0BAD0B0 
 100      3A20D0BD 
 100      D0B5D0B4 
 100              	> 
 100              	>  strlen5 =. - str5
 100              	> 
 100              	> .text
 100 00fb B8040000 	>  movl $4,%eax
 100      00
 100 0100 BB010000 	>  movl $1,%ebx
 100      00
 100 0105 B9810100 	>  movl $str5,%ecx
 100      00
 100 010a BA430000 	>  movl $strlen5,%edx
 100      00
 100 010f CD80     	>  int $0x80
 101              	    Exit $1                     # –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏
 101 0111 B8010000 	>  movl $1,%eax
 101      00
 101 0116 BB010000 	>  movl $1,%ebx
 101      00
 101 011b CD80     	>  int $0x80
 102              	
 103              	# –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ b(i) = A(k,i) + A(i,l)
 104              	calculate_vector:
 105              	    Puts "–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ b(i) = A(k,i) + A(i,l):"
 105              	> .data
 105 01c4 D092D18B 	>  str7:.ascii "–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ b(i) = A(k,i) + A(i,l):\n"
 105      D187D0B8 
 105      D181D0BB 
 105      D0B5D0BD 
 105      D0B8D0B5 
 105              	> 
 105              	>  strlen7 =. - str7
 105              	> 
 105              	> .text
 105 011d B8040000 	>  movl $4,%eax
 105      00
 105 0122 BB010000 	>  movl $1,%ebx
 105      00
 105 0127 B9C40100 	>  movl $str7,%ecx
 105      00
 105 012c BA3C0000 	>  movl $strlen7,%edx
 105      00
 105 0131 CD80     	>  int $0x80
 106              	
 107 0133 BF000000 	    movl $0, %edi               # i = 0 (–∏–Ω–¥–µ–∫—Å —ç–ª–µ–º–µ–Ω—Ç–∞ –≤–µ–∫—Ç–æ—Ä–∞, –∏—Å–ø–æ–ª—å
 107      00
 108              	
 109              	calc_loop:
 110              	    # –í—ã—á–∏—Å–ª–µ–Ω–∏–µ A(k,i) –∏—Å–ø–æ–ª—å–∑—É—è –±–∞–∑–æ–≤—É—é –∞–¥—Ä–µ—Å–∞—Ü–∏—é —Å–æ —Å–º–µ—
 111              	    # –ê–¥—Ä–µ—Å A(k,i) = matrix_A + (k * 6 + i) * 4
 112 0138 A1A80000 	    movl k_index, %eax          # –∑–∞–≥—Ä—É–∑–∏—Ç—å k. –ù–∞–ø—Ä–∏–º–µ—Ä: 3
GAS LISTING task5.S 			page 7


 112      00
 113 013d BB060000 	    movl $6, %ebx               # –∫–æ–ª–∏—á—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Å—Ç—Ä–æ–∫–µ, –º–æ–∂
 113      00
 114 0142 F7E3     	    mull %ebx                   # —É–º–Ω–æ–∂–∞–µ–º –ø–æ–∑–∏—Ü–∏—é —Ç–µ–∫—É—â–µ–≥–æ k –Ω–∞ 6 –∏ –ø–æ
 115 0144 01F8     	    addl %edi, %eax             # –ø—Ä–∏–±–∞–≤–ª—è–µ–º –Ω–æ–º–µ—Ä —Å—Ç–æ–ª–±—Ü–∞  eax = k * 6 +i=18
 116              	
 117              	    # –£–º–Ω–æ–∂–∞–µ–º –Ω–∞ 4 —á–µ—Ä–µ–∑ —Å–¥–≤–∏–≥
 118 0146 C1E002   	    shll $2, %eax               # —Å–º–µ—â–µ–Ω–µ–∏ –≤ –±–∞–π—Ç–∞—Ö eax = (k * 6 +i) * 4 = (3*6+0)*4
 119              	    # –ü–æ—á–µ–º—É shll - –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ mull, –Ω–æ —è –∑–∞–ø—É—Ç–∞–ª—Å—è –≤ —Ä–µ–≥–∏—Å—Ç—Ä–
 120              	
 121              	    # –ë–∞–∑–æ–≤–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è —Å–æ —Å–º–µ—â–µ–Ω–∏–µ–º: matrix_A(%eax)
 122              	    # –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∞–¥—Ä–µ—Å = –∞–¥—Ä–µ—Å matrix_A + –∑–Ω–∞—á–µ–Ω–∏–µ –≤ %eax
 123 0149 8B881800 	    movl matrix_A(%eax), %ecx   # –ê —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–
 123      0000
 124              	
 125              	    # –í—ã—á–∏—Å–ª–µ–Ω–∏–µ A(i,l) –∏—Å–ø–æ–ª—å–∑—É—è –±–∞–∑–æ–≤—É—é –∞–¥—Ä–µ—Å–∞—Ü–∏—é —Å–æ —Å–º–µ—
 126              	    # –ê–¥—Ä–µ—Å A(i,l) = matrix_A + (i * 6 + l) * 4
 127 014f 89F8     	    movl %edi, %eax             # –∑–∞–≥—Ä—É–∑–∏—Ç—å i –≤ eax. –ù–∞–ø—Ä–º–∏–µ—Ä: 2
 128 0151 BB060000 	    movl $6, %ebx               # —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–æ–∫–∏
 128      00
 129 0156 F7E3     	    mull %ebx                   # eax = i * 6 = 0*6=0
 130 0158 0305AC00 	    addl l_index, %eax          # eax = i * 6 + l=0*6+2=2
 130      0000
 131              	
 132              	    # –£–º–Ω–æ–∂–∞–µ–º –Ω–∞ 4 —á–µ—Ä–µ–∑ —Å–¥–≤–∏–≥ –≤–º–µ—Å—Ç–æ mull
 133 015e C1E002   	    shll $2, %eax               # eax = (i * 6 + l) * 4=0*6 +2) *4 = 8 –±–∞–π—Ç
 134              	
 135              	    # –ë–∞–∑–æ–≤–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è —Å–æ —Å–º–µ—â–µ–Ω–∏–µ–º: matrix_A(%eax)
 136              	    # –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∞–¥—Ä–µ—Å = –∞–¥—Ä–µ—Å matrix_A + –∑–Ω–∞—á–µ–Ω–∏–µ –≤ %eax
 137 0161 8B901800 	    movl matrix_A(%eax), %edx   # edx = A(i,l) # –∞ —ç—Ç–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ 13
 137      0000
 138              	
 139              	    # b(i) = A(k,i) + A(i,l)
 140 0167 01D1     	    addl %edx, %ecx             # –°–∫–ª–∞–¥—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ 0 —Å–æ —Å–
 141              	
 142              	    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ result_vector[i]
 143 0169 BB000000 	    movl $result_vector, %ebx   # –±–∞–∑–æ–≤—ã–π –∞–¥—Ä–µ—Å –≤–µ–∫—Ç–æ—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
 143      00
 144 016e 890CBB   	    movl %ecx, (%ebx,%edi,4)    # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å b(i) –≤ result_vector[i]
 145              	
 146              	    # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
 147 0171 47       	    incl %edi                   # i++
 148 0172 83FF06   	    cmpl $6, %edi               # –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã?
 149 0175 75C1     	    jne calc_loop               # –ù–ï–¢ - –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ü–∏–∫–ª
 150              	
 151              	    # –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞
 152 0177 EB00     	    jmp print_vector
 153              	
 154              	# –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞
 155              	print_vector:
 156              	    Puts "–†–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π –≤–µ–∫—Ç–æ—Ä b:"
 156              	> .data
 156 0200 D0A0D0B5 	>  str8:.ascii "–†–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π –≤–µ–∫—Ç–æ—Ä b:\n"
 156      D0B7D183 
 156      D0BBD18C 
 156      D182D0B8 
 156      D180D183 
GAS LISTING task5.S 			page 8


 156              	> 
 156              	>  strlen8 =. - str8
 156              	> 
 156              	> .text
 156 0179 B8040000 	>  movl $4,%eax
 156      00
 156 017e BB010000 	>  movl $1,%ebx
 156      00
 156 0183 B9000200 	>  movl $str8,%ecx
 156      00
 156 0188 BA2D0000 	>  movl $strlen8,%edx
 156      00
 156 018d CD80     	>  int $0x80
 157              	
 158 018f BE000000 	    movl $0, %esi               # i = 0 (–∏–Ω–¥–µ–∫—Å —ç–ª–µ–º–µ–Ω—Ç–∞ –≤–µ–∫—Ç–æ—Ä–∞)
 158      00
 159              	
 160              	print_loop:
 161              	    # –í—ã–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏ "b[i] = –∑–Ω–∞—á–µ–Ω–∏–µ" –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É
 162              	    # –§–æ—Ä–º–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É –≤ output_buf
 163 0194 BF080000 	    movl $output_buf, %edi      # —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –Ω–∞—á–∞–ª–æ –±—É—Ñ–µ—Ä–∞
 163      00
 164              	
 165              	    # –î–æ–±–∞–≤–ª—è–µ–º "b["
 166 0199 C60762   	    movb $'b', (%edi)
 167 019c 47       	    incl %edi
 168 019d C6075B   	    movb $'[', (%edi)
 169 01a0 47       	    incl %edi
 170              	
 171              	    # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–µ–∫—Å i (0-5, –≤—Å–µ–≥–¥–∞ –æ–¥–Ω–∞ —Ü–∏—Ñ—Ä–∞)
 172 01a1 89F0     	    movl %esi, %eax             # –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω–¥–µ–∫—Å i
 173 01a3 83C030   	    addl $'0', %eax             # –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ —Å–∏–º–≤–æ–ª
 174 01a6 8807     	    movb %al, (%edi)
 175 01a8 47       	    incl %edi
 176              	
 177              	    # –î–æ–±–∞–≤–ª—è–µ–º "] = "
 178 01a9 C6075D   	    movb $']', (%edi)
 179 01ac 47       	    incl %edi
 180 01ad C60720   	    movb $' ', (%edi)
 181 01b0 47       	    incl %edi
 182 01b1 C6073D   	    movb $'=', (%edi)
 183 01b4 47       	    incl %edi
 184 01b5 C60720   	    movb $' ', (%edi)
 185 01b8 47       	    incl %edi
 186              	
 187              	    # –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ b(i)
 188 01b9 BB000000 	    movl $result_vector, %ebx   # –±–∞–∑–æ–≤—ã–π –∞–¥—Ä–µ—Å –≤–µ–∫—Ç–æ—Ä–∞
 188      00
 189 01be 8B04B3   	    movl (%ebx,%esi,4), %eax    # –∑–∞–≥—Ä—É–∑–∏—Ç—å b(i) –∏—Å–ø–æ–ª—å–∑—É—è —Ç–µ–∫—É—â–∏–π %esi
 190              	
 191              	    # –°–æ—Ö—Ä–∞–Ω—è–µ–º %esi –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º —Ñ—É–Ω–∫—Ü–∏–∏
 192 01c1 56       	    pushl %esi
 193              	
 194              	    # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —á–∏—Å–ª–æ –≤ —Å—Ç—Ä–æ–∫—É –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –±—É—Ñ–µ—Ä
 195 01c2 E8420000 	    call convert_number_to_buf  # –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —á–∏—Å–ª–æ –≤ —Å—Ç—Ä–æ–∫—É
 195      00
 196              	
GAS LISTING task5.S 			page 9


 197              	    # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º %esi
 198 01c7 5E       	    popl %esi
 199              	
 200              	    # –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏
 201 01c8 C6070A   	    movb $'\n', (%edi)
 202 01cb 47       	    incl %edi
 203              	
 204              	    # –í—ã—á–∏—Å–ª—è–µ–º –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏ –∏ –≤—ã–≤–æ–¥–∏–º
 205 01cc B9080000 	    movl $output_buf, %ecx      # –Ω–∞—á–∞–ª–æ –±—É—Ñ–µ—Ä–∞
 205      00
 206 01d1 89FA     	    movl %edi, %edx             # —Ç–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è (–∫–æ–Ω–µ—Ü —Å—Ç—Ä–æ–∫–∏)
 207 01d3 29CA     	    subl %ecx, %edx             # –¥–ª–∏–Ω–∞ = –∫–æ–Ω–µ—Ü - –Ω–∞—á–∞–ª–æ
 208              	
 209              	    # –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
 210 01d5 B8040000 	    movl $4, %eax               # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ write
 210      00
 211 01da BB010000 	    movl $1, %ebx               # –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä stdout
 211      00
 212              	    # ecx —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞
 213              	    # edx —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–ª–∏–Ω—É
 214 01df CD80     	    int $0x80                   # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
 215              	
 216              	    # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
 217 01e1 46       	    incl %esi                   # i++
 218 01e2 83FE06   	    cmpl $6, %esi               # –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤—ã–≤–µ–¥–µ–Ω—ã?
 219 01e5 75AD     	    jne print_loop              # –ù–ï–¢ - –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ü–∏–∫–ª
 220              	
 221              	    # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
 222              	    Puts "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã."
 222              	> .data
 222 022d D097D0B0 	>  str9:.ascii "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã.\n"
 222      D0B2D0B5 
 222      D180D188 
 222      D0B5D0BD 
 222      D0B8D0B5 
 222              	> 
 222              	>  strlen9 =. - str9
 222              	> 
 222              	> .text
 222 01e7 B8040000 	>  movl $4,%eax
 222      00
 222 01ec BB010000 	>  movl $1,%ebx
 222      00
 222 01f1 B92D0200 	>  movl $str9,%ecx
 222      00
 222 01f6 BA230000 	>  movl $strlen9,%edx
 222      00
 222 01fb CD80     	>  int $0x80
 223              	    Exit $0                     # –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —É—Å–ø–µ—à–Ω–æ
 223 01fd B8010000 	>  movl $1,%eax
 223      00
 223 0202 BB000000 	>  movl $0,%ebx
 223      00
 223 0207 CD80     	>  int $0x80
 224              	
 225              	# –ü–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —á–∏—Å–ª–∞ –∏–∑ %eax –≤ —Å—Ç—Ä–æ–∫—É
 226              	# –í—Ö–æ–¥: %eax - —á–∏—Å–ª–æ, %edi - —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±—É—Ñ–µ—Ä
GAS LISTING task5.S 			page 10


 227              	# –í—ã—Ö–æ–¥: %edi - —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –ø–æ–∑–∏—Ü–∏—é –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ü–∏—Ñ—Ä—
 228              	convert_number_to_buf:
 229 0209 50       	    pushl %eax
 230 020a 53       	    pushl %ebx
 231 020b 51       	    pushl %ecx
 232 020c 52       	    pushl %edx
 233 020d 56       	    pushl %esi
 234              	
 235 020e 89C3     	    movl %eax, %ebx             # –∫–æ–ø–∏—Ä—É–µ–º —á–∏—Å–ª–æ –≤ ebx
 236 0210 B90A0000 	    movl $10, %ecx              # –¥–µ–ª–∏—Ç–µ–ª—å = 10
 236      00
 237              	
 238              	    # –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π: –µ—Å–ª–∏ —á–∏—Å–ª–æ = 0
 239 0215 83FB00   	    cmpl $0, %ebx
 240 0218 7426     	    je convert_zero
 241              	
 242              	    # –ù–æ—Ä–º–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π: –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —á–∏—Å–ª–∞ –≤ —Å—Ç—Ä–æ–∫—É
 243 021a BE000000 	    movl $0, %esi               # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–∞ —Ü–∏—Ñ—Ä
 243      00
 244              	
 245              	convert_num_loop_body:
 246              	    # –î–µ–ª–∏–º —á–∏—Å–ª–æ –Ω–∞ 10, –ø–æ–ª—É—á–∞–µ–º –æ—Å—Ç–∞—Ç–æ–∫ (—Ü–∏—Ñ—Ä—É)
 247 021f 89D8     	    movl %ebx, %eax             # –∑–∞–≥—Ä—É–∂–∞–µ–º —á–∏—Å–ª–æ –≤ eax
 248 0221 BA000000 	    movl $0, %edx               # –æ–±–Ω—É–ª—è–µ–º edx –ø–µ—Ä–µ–¥ –¥–µ–ª–µ–Ω–∏–µ–º
 248      00
 249 0226 F7F1     	    divl %ecx                   # eax = eax / 10, edx = –æ—Å—Ç–∞—Ç–æ–∫
 250 0228 89C3     	    movl %eax, %ebx             # —Å–æ—Ö—Ä–∞–Ω—è–µ–º —á–∞—Å—Ç–Ω–æ–µ
 251              	
 252              	    # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Å—Ç–∞—Ç–æ–∫ –≤ —Å–∏–º–≤–æ–ª –∏ –ø–æ–º–µ—â–∞–µ–º –≤ —Å—Ç–µ–∫
 253 022a 83C230   	    addl $'0', %edx             # –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Ü–∏—Ñ—Ä—É –≤ –∫–æ–¥ —Å–∏–º–≤–æ–ª–∞
 254 022d 52       	    pushl %edx                  # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å—Ç–µ–∫
 255              	
 256 022e 46       	    incl %esi                   # —Å—á–µ—Ç—á–∏–∫ —Ü–∏—Ñ—Ä
 257              	
 258 022f 83FB00   	    cmpl $0, %ebx               # —á–∞—Å—Ç–Ω–æ–µ = 0?
 259 0232 75EB     	    jne convert_num_loop_body   # –ù–ï–¢ - –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–µ–ª–µ–Ω–∏–µ
 260              	
 261              	    # –ò–∑–≤–ª–µ–∫–∞–µ–º —Ü–∏—Ñ—Ä—ã –∏–∑ —Å—Ç–µ–∫–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
 262              	
 263              	extract_num_digits:
 264 0234 58       	    popl %eax                   # –∏–∑–≤–ª–µ–∫–∞–µ–º –∫–æ–¥ —Å–∏–º–≤–æ–ª–∞ –∏–∑ —Å—Ç–µ–∫–∞
 265 0235 8807     	    movb %al, (%edi)            # –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –±—É—Ñ–µ—Ä
 266 0237 47       	    incl %edi                   # —Å–ª–µ–¥—É—é—â–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –±—É—Ñ–µ—Ä–µ
 267 0238 4E       	    decl %esi                   # —É–º–µ–Ω—å—à–∞–µ–º —Å—á–µ—Ç—á–∏–∫
 268 0239 83FE00   	    cmpl $0, %esi               # –≤—Å–µ —Ü–∏—Ñ—Ä—ã –∏–∑–≤–ª–µ—á–µ–Ω—ã?
 269 023c 75F6     	    jne extract_num_digits      # –ù–ï–¢ - –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
 270 023e EB04     	    jmp convert_num_done
 271              	
 272              	convert_zero:
 273              	    # –í—ã–≤–æ–¥ "0" –µ—Å–ª–∏ —á–∏—Å–ª–æ —Ä–∞–≤–Ω–æ 0
 274 0240 C60730   	    movb $'0', (%edi)
 275 0243 47       	    incl %edi
 276              	
 277              	convert_num_done:
 278 0244 5E       	    popl %esi
 279 0245 5A       	    popl %edx
 280 0246 59       	    popl %ecx
GAS LISTING task5.S 			page 11


 281 0247 5B       	    popl %ebx
 282 0248 58       	    popl %eax
 283 0249 C3       	    ret
 284              	.end
GAS LISTING task5.S 			page 12


DEFINED SYMBOLS
                             .bss:00000000 c
             task5.S:11     .bss:00000001 last_digit
             task5.S:13     .bss:00000008 output_buf
             task5.S:16     .data:00000000 result_vector
             task5.S:18     .data:00000018 matrix_A
             task5.S:26     .data:000000a8 k_index
             task5.S:27     .data:000000ac l_index
             task5.S:28     .data:000000b0 input_stage
             task5.S:33     .text:00000000 _start
             task5.S:41     .data:000000b4 str0
             task5.S:41     *ABS*:00000041 strlen0
             task5.S:43     .text:0000003c kbd_input
             task5.S:99     .text:000000fb error_no_input
             task5.S:64     .text:00000082 process_enter
             task5.S:95     .text:000000d9 invalid_index
             task5.S:83     .text:000000a1 save_k_index
             task5.S:91     .text:000000d2 save_l_index
             task5.S:88     .data:000000f5 str2
             task5.S:88     *ABS*:00000041 strlen2
             task5.S:104    .text:0000011d calculate_vector
             task5.S:96     .data:00000136 str3
             task5.S:96     *ABS*:0000004b strlen3
             task5.S:100    .data:00000181 str5
             task5.S:100    *ABS*:00000043 strlen5
             task5.S:105    .data:000001c4 str7
             task5.S:105    *ABS*:0000003c strlen7
             task5.S:109    .text:00000138 calc_loop
             task5.S:155    .text:00000179 print_vector
             task5.S:156    .data:00000200 str8
             task5.S:156    *ABS*:0000002d strlen8
             task5.S:160    .text:00000194 print_loop
             task5.S:228    .text:00000209 convert_number_to_buf
             task5.S:222    .data:0000022d str9
             task5.S:222    *ABS*:00000023 strlen9
             task5.S:272    .text:00000240 convert_zero
             task5.S:245    .text:0000021f convert_num_loop_body
             task5.S:263    .text:00000234 extract_num_digits
             task5.S:277    .text:00000244 convert_num_done

NO UNDEFINED SYMBOLS
