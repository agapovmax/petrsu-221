GAS LISTING task41.S 			page 1


   1              	/*
   2              	 * ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ð¸ Ð²Ñ‹Ð²Ð¾Ð´Ð° ÑÑƒÐ¼Ð¼Ñ‹ Ð¾Ð´Ð½Ð¾Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ñ‹Ñ… Ñ‡Ð¸
   3              	 * ÐšÐ°Ðº Ð¼Ð¾Ð¶Ð½Ð¾ Ð·Ð°Ñ‚ÐµÑÑ‚Ð¸Ñ‚ÑŒ Ð±ÐµÐ· Ñ€ÑƒÑ‡Ð½Ð¾Ð³Ð¾ Ð²Ð²Ð¾Ð´Ð° Ð² stdin?
   4              	 * echo -e "5\n9\n1\n" | ./sum_digits
   5              	 */
   6              	
   7              	.include "my-macro"
   1              	/*
   2              	 * ÐœÐ°ÐºÑ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹.
   3              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
   4              	 *     - ÐºÐ¾Ð´ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
   5              	 *
   6              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
   7              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man 2 exit'
   8              	*/
   9              	.macro Exit ret_val
  10              	    movl $1, %eax         # Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° exit
  11              	    movl \ret_val, %ebx     # ÐºÐ¾Ð´ Ð²Ñ‹Ñ…Ð¾Ð´Ð°
  12              	    int $0x80         # Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  13              	.endm
  14              	
  15              	
  16              	/*
  17              	 * ÐœÐ°ÐºÑ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð±Ð°Ð¹Ñ‚Ð° ÐºÐ¾Ð´Ð° Ñ
  18              	 * ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ð²Ð¾Ð´Ð°
  19              	 * ÐÐµÐºÐ°Ñ Ð°Ð±ÑÑ‚Ñ€Ð°ÐºÑ†Ð¸Ñ Ð½Ð°Ð´ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¼ Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð¼ Linux read, Ð¿Ñ€ÐµÐ´Ð½Ð
  20              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
  21              	 *     - Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð° Ð´Ð»Ñ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð±Ð°Ð¹Ñ‚Ð°
  22              	 * Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
  23              	 *    - Ð² %eax ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ… Ð±Ð°Ð¹Ñ‚Ð¾Ð²
  24              	 *    - Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ buf_addr - ÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ð¹ Ð±Ð°Ð¹Ñ‚
  25              	 *
  26              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
  27              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man 2 read'
  28              	*/
  29              	.macro Getchar buf_addr
  30              	    movl $3, %eax        # Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° read
  31              	    movl $0, %ebx        # Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ð²Ð¾
  32              	    movl \buf_addr, %ecx    # Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð° (Ð¾Ð½ Ð¶Ðµ - Ñ„Ð°ÐºÑ‚Ð¸Ñ‡
  33              	                     # Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð°)
  34              	    movl $1, %edx        # Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ
  35              	    int $0x80        # Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  36              	.endm
  37              	
  38              	/*
  39              	 * ÐœÐ°ÐºÑ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ  Ð²Ñ‹Ð²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð² Ñ„Ð°Ð¹Ð» ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð
  40              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
  41              	 *     - Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°.
  42              	 *
  43              	 * ÐŸÑ€Ð¸Ð¼ÐµÑ‚Ñ€ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð°:
  44              	 *    Puts "Ð¢ÐµÐºÑÑ‚ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸"
  45              	 *
  46              	 * Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
  47              	 *    - Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ð² ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð
  48              	 *      Ð¸ Ð²ÑÐ»ÐµÐ´ Ð·Ð° Ð½Ð¸Ð¼Ð¸ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ \n
  49              	 *
  50              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
GAS LISTING task41.S 			page 2


  51              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man puts', 'man 2 write'
  52              	*/
  53              	.macro Puts string
  54              	.data
  55              	    str\@:     .ascii "\string\n"  # Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð
  56              	
  57              	    strlen\@ =     . - str\@           # Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð´Ð»Ð¸Ð½Ñ‹ ÑÑ‚Ñ€Ð¾ÐºÐ
  58              	
  59              	.text
  60              	    movl $4, %eax        # Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° write
  61              	    movl $1, %ebx        # Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð²
  62              	    movl $str\@, %ecx    # Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ð¼Ð¸ ÑÐ¸
  63              	    movl $strlen\@, %edx     # Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð²Ñ‹Ð²Ð
  64              	    int $0x80        # Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  65              	.endm
   8              	
   9              	.bss
  10              	    .lcomm c, 1                 # Ð±ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð±Ð°Ð¹Ñ‚Ð° Ð¸Ð· stdin
  11              	    .lcomm last_digit, 1        # Ð±ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ Ð²Ð²ÐµÐ´ÐµÐ
  12              	    .lcomm is_negative, 1       # Ñ„Ð»Ð°Ð³ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾ Ñ‡Ð¸ÑÐ»Ð° (0 = Ð¿Ð¾Ð»Ð¾Ð¶Ð
  13              	    .lcomm output_buf, 17       # Ð±ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð° (Ð´Ð»Ñ Ð´Ð²Ð
  14              	    # Ð¡Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼ 16 Ð±Ð¸Ñ‚ Ð´Ð»Ñ 2 Ð±Ð°Ð¹Ñ‚Ð¾Ð²Ð¾Ð³Ð¾ Ñ‡Ð¸ÑÐ»Ð° + \n = 17
  15              	    # Ð Ð°Ð·ÑƒÐ¼ÐµÐµÑ‚ÑÑ, Ð´ÐµÑÑÑ‚Ð¸Ñ‡Ð½Ð¾Ðµ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ -32678 = 6 + 1) Ð¸ Ð²Ð¾ÑÑŒÐ¼Ð¸Ñ
  16              	
  17              	.data
  18 0000 0000     	    sum: .word 0                # 2-Ð±Ð°Ð¹Ñ‚Ð¾Ð²Ð°Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ñ
  19              	
  20              	.text
  21              	.global _start
  22              	
  23              	_start:
  24 0000 90       	    nop                         # Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´Ñ‡Ð¸ÐºÐ°
  25              	
  26 0001 66C70500 	    movw $0, sum                # Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑƒÐ¼Ð¼Ñ‹ = 0
  26      00000000 
  26      00
  27 000a C6050100 	    movb $0, last_digit         # Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ Ñ†Ð¸Ñ„Ñ€Ñ‹
  27      000000
  28 0011 C6050200 	    movb $0, is_negative        # Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ„Ð»Ð°Ð³Ð° Ð·Ð½Ð°ÐºÐ° = 0 (Ð¿Ð¾Ð»Ð¾Ð¶Ð
  28      000000
  29              	
  30              	    Puts "Ð’Ð²Ð¾Ð´Ð¸Ñ‚Ðµ Ñ‡Ð¸ÑÐ»Ð° (Ñ Ð¼Ð¸Ð½ÑƒÑÐ¾Ð¼ Ð´Ð»Ñ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ…) Ð¸ Ð¶Ð¼Ð¸
  30              	> .data
  30 0002 D092D0B2 	>  str0:.ascii "Ð’Ð²Ð¾Ð´Ð¸Ñ‚Ðµ Ñ‡Ð¸ÑÐ»Ð° (Ñ Ð¼Ð¸Ð½ÑƒÑÐ¾Ð¼ Ð´Ð»Ñ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ…) Ð¸ Ð¶Ð¼Ð¸Ñ‚Ðµ Enter. Ð”Ð»Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ: Ctrl+D\n"
  30      D0BED0B4 
  30      D0B8D182 
  30      D0B520D1 
  30      87D0B8D1 
  30              	> 
  30              	>  strlen0 =. - str0
  30              	> 
  30              	> .text
  30 0018 B8040000 	>  movl $4,%eax
  30      00
  30 001d BB010000 	>  movl $1,%ebx
  30      00
  30 0022 B9020000 	>  movl $str0,%ecx
GAS LISTING task41.S 			page 3


  30      00
  30 0027 BA890000 	>  movl $strlen0,%edx
  30      00
  30 002c CD80     	>  int $0x80
  31              	
  32              	kbd_input:
  33              	    Getchar $c                  # Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð² Ð²Ð²Ð¾Ð´Ð° Ð±Ð°Ð¹Ñ‚Ð° Ð¸Ð· stdin
  33 002e B8030000 	>  movl $3,%eax
  33      00
  33 0033 BB000000 	>  movl $0,%ebx
  33      00
  33 0038 B9000000 	>  movl $c,%ecx
  33      00
  33              	>  
  33 003d BA010000 	>  movl $1,%edx
  33      00
  33 0042 CD80     	>  int $0x80
  34              	
  35 0044 83F800   	    cmpl $0, %eax               # Ð½Ð°ÑÑ‚ÑƒÐ¿Ð¸Ð»Ð¾ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ EOF?
  36 0047 0F847002 	    je print_result             # Ð”Ð - Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð¸ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ
  36      0000
  37              	
  38 004d 803D0000 	    cmpb $'\n', c               # ÑÑ‚Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ (Enter)?
  38      00000A
  39 0054 7430     	    je process_enter            # Ð”Ð - Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Enter Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ðº ÑÑƒÐ¼Ð¼
  40              	
  41 0056 803D0000 	    cmpb $'-', c                # ÑÑ‚Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¼Ð¸Ð½ÑƒÑ?
  41      00002D
  42 005d 741E     	    je process_minus            # Ð”Ð - ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ñ„Ð»Ð°Ð³ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾
  43              	
  44 005f 803D0000 	    cmpb $'9', c                # ÐºÐ¾Ð´ Ð±Ð¾Ð»ÑŒÑˆÐµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '9'?
  44      000039
  45 0066 77C6     	    ja kbd_input                # Ð”Ð - Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ (Ð½Ðµ Ñ†Ð¸Ñ„Ñ€Ð°)
  46              	
  47 0068 803D0000 	    cmpb $'0', c                # ÐºÐ¾Ð´ Ð¼ÐµÐ½ÑŒÑˆÐµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '0'?
  47      000030
  48 006f 72BD     	    jb kbd_input                # Ð”Ð - Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ (Ð½Ðµ Ñ†Ð¸Ñ„Ñ€Ð°)
  49              	
  50              	    # ÐÐ³Ð°, ÑÑ‚Ð¾ Ñ†Ð¸Ñ„Ñ€Ð° - ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ÐµÑ‘ ÐºÐ°Ðº Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÑŽÑŽ. Ð•ÑÐ»Ð¸ Ð½ÐµÑ
  51 0071 A0000000 	    movb c, %al                 # Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ ÐºÐ¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° Ñ†Ð¸Ñ„Ñ€Ñ‹ Ð¸Ð· c Ð² al
  51      00
  52 0076 A2010000 	    movb %al, last_digit        # ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÑŽÑŽ Ð²Ð²ÐµÐ´ÐµÐ½Ð½ÑƒÑŽ Ñ†Ð¸Ñ„Ñ€
  52      00
  53              	
  54 007b EBB1     	    jmp kbd_input               # Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  55              	
  56              	process_minus:
  57              	    # Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾ Ñ‡Ð¸ÑÐ»Ð°
  58 007d C6050200 	    movb $1, is_negative        # Ð¾Ñ‚Ð¼ÐµÑ‚Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ñ‡Ð¸ÑÐ»Ð¾ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ
  58      000001
  59 0084 EBA8     	    jmp kbd_input               # Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  60              	
  61              	process_enter:
  62              	    # ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° Ð² Ñ‡Ð¸ÑÐ»Ð¾Ð²Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ
  63 0086 0FB60501 	    movzbl last_digit, %eax     # Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ ÐºÐ¾Ð´ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ Ñ†Ð¸Ñ„Ñ€Ñ‹ Ð² eax
  63      000000
  64              	
GAS LISTING task41.S 			page 4


  65              	    # ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°: Ð±Ñ‹Ð»Ð° Ð»Ð¸ Ð²Ð²ÐµÐ´ÐµÐ½Ð° Ñ…Ð¾Ñ‚Ñ Ð±Ñ‹ Ð¾Ð´Ð½Ð° Ñ†Ð¸Ñ„Ñ€Ð°
  66 008d 83F800   	    cmpl $0, %eax               # ÐµÑÐ»Ð¸ ÐºÐ¾Ð´ = 0, Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ Ñ†Ð¸Ñ„Ñ€Ñ‹ Ð½Ðµ Ð±Ñ‹Ð»Ð¾
  67 0090 0F849200 	    je reset_and_continue       # Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð¿ÑƒÑÑ‚Ð¾Ð¹ Enter Ð¸ ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ
  67      0000
  68              	
  69 0096 83E830   	    subl $'0', %eax             # Ð²Ñ‹Ñ‡ÐµÑÑ‚ÑŒ ÐºÐ¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '0' - Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð¼ Ñ‡Ð¸ÑÐ
  70              	
  71              	    # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾ Ñ‡Ð¸ÑÐ»Ð°
  72 0099 803D0200 	    cmpb $1, is_negative        # Ñ‡Ð¸ÑÐ»Ð¾ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ?
  72      000001
  73 00a0 7502     	    jne add_to_sum              # ÐÐ•Ð¢ - Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÐ¼ Ñ Ð¿Ð¾Ð»Ð¾Ð¶Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼ Ñ‡Ð¸Ñ
  74              	
  75              	    # Ð§Ð¸ÑÐ»Ð¾ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ - Ð¸Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ (0 - %eax). Ð
  76 00a2 F7D8     	    negl %eax                   # eax = -eax
  77              	
  78              	add_to_sum:
  79              	    # Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ðº ÑÑƒÐ¼Ð¼Ðµ Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¾Ð¹ Ð·Ð½Ð°ÐºÐ¾Ð²Ð¾Ð³Ð¾ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ
  80              	    # Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ 16-Ð±Ð¸Ñ‚Ð½Ð¾Ðµ Ð·Ð½Ð°ÐºÐ¾Ð²Ð¾Ðµ ÑÐ»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
  81 00a4 0FBF1D00 	    movswl sum, %ebx            # Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ ÑÑƒÐ¼Ð¼Ñƒ Ð² ebx (Ñ Ð·Ð½Ð°ÐºÐ
  81      000000
  82 00ab 01C3     	    addl %eax, %ebx             # Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‡Ð¸ÑÐ»Ð¾Ð²Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ (Ð¿Ð¾Ð»Ð¾Ð¶Ð¸Ñ
  83              	
  84              	    # ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð½Ð°ÐºÐ¾Ð²Ð¾Ð³Ð¾ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ 16-Ð±Ð¸Ñ‚Ð½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸
  85              	    # Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð´Ð»Ñ signed 16-bit: -32768 .. 32767
  86 00ad 81FBFF7F 	    cmpl $32767, %ebx           # Ð±Ð¾Ð»ÑŒÑˆÐµ Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼Ð°?
  86      0000
  87 00b3 7F7F     	    jg overflow_detected        # Ð”Ð - Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð²Ð²ÐµÑ€Ñ…
  88              	
  89 00b5 81FB0080 	    cmpl $-32768, %ebx          # Ð¼ÐµÐ½ÑŒÑˆÐµ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼Ð°?
  89      FFFF
  90 00bb 7C77     	    jl overflow_detected        # Ð”Ð - Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð²Ð½Ð¸Ð·
  91              	
  92 00bd 66891D00 	    movw %bx, sum               # ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²ÑƒÑŽ ÑÑƒÐ¼Ð¼Ñƒ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¼Ð»Ð°Ð´Ñˆ
  92      000000
  93              	
  94 00c4 C6050100 	    movb $0, last_digit         # ÑÐ±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÑŽÑŽ Ñ†Ð¸Ñ„Ñ€Ñƒ
  94      000000
  95 00cb C6050200 	    movb $0, is_negative        # ÑÐ±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ñ„Ð»Ð°Ð³ Ð·Ð½Ð°ÐºÐ°
  95      000000
  96              	
  97              	    Puts "ÐŸÑ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ð°Ñ ÑÑƒÐ¼Ð¼Ð° (Ð´ÐµÑÑÑ‚Ð¸Ñ‡Ð½Ð°Ñ):"
  97              	> .data
  97 008b D09FD180 	>  str2:.ascii "ÐŸÑ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ð°Ñ ÑÑƒÐ¼Ð¼Ð° (Ð´ÐµÑÑÑ‚Ð¸Ñ‡Ð½Ð°Ñ):\n"
  97      D0BED0BC 
  97      D0B5D0B6 
  97      D183D182 
  97      D0BED187 
  97              	> 
  97              	>  strlen2 =. - str2
  97              	> 
  97              	> .text
  97 00d2 B8040000 	>  movl $4,%eax
  97      00
  97 00d7 BB010000 	>  movl $1,%ebx
  97      00
  97 00dc B98B0000 	>  movl $str2,%ecx
  97      00
GAS LISTING task41.S 			page 5


  97 00e1 BA3E0000 	>  movl $strlen2,%edx
  97      00
  97 00e6 CD80     	>  int $0x80
  98              	    # Ð’Ñ‹Ð²ÐµÑÑ‚Ð¸ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ ÑÑƒÐ¼Ð¼Ñƒ Ð² Ð´ÐµÑÑÑ‚Ð¸Ñ‡Ð½Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ
  99 00e8 E8690000 	    call print_current_sum
  99      00
 100              	
 101              	    Puts "ÐŸÑ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ð°Ñ ÑÑƒÐ¼Ð¼Ð° (Ð²Ð¾ÑÐ¼ÐµÑ€Ð¸Ñ‡Ð½Ð°Ñ):"
 101              	> .data
 101 00c9 D09FD180 	>  str3:.ascii "ÐŸÑ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ð°Ñ ÑÑƒÐ¼Ð¼Ð° (Ð²Ð¾ÑÐ¼ÐµÑ€Ð¸Ñ‡Ð½Ð°Ñ):\n"
 101      D0BED0BC 
 101      D0B5D0B6 
 101      D183D182 
 101      D0BED187 
 101              	> 
 101              	>  strlen3 =. - str3
 101              	> 
 101              	> .text
 101 00ed B8040000 	>  movl $4,%eax
 101      00
 101 00f2 BB010000 	>  movl $1,%ebx
 101      00
 101 00f7 B9C90000 	>  movl $str3,%ecx
 101      00
 101 00fc BA400000 	>  movl $strlen3,%edx
 101      00
 101 0101 CD80     	>  int $0x80
 102              	    # Ð’Ñ‹Ð²ÐµÑÑ‚Ð¸ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ ÑÑƒÐ¼Ð¼Ñƒ Ð² Ð²Ð¾ÑÐ¼ÐµÑ€Ð¸Ñ‡Ð½Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ
 103 0103 E8D40000 	    call print_octal_sum
 103      00
 104              	
 105              	    Puts "ÐŸÑ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ð°Ñ ÑÑƒÐ¼Ð¼Ð° (Ð´Ð²Ð¾Ð¸Ñ‡Ð½Ð°Ñ):"
 105              	> .data
 105 0109 D09FD180 	>  str4:.ascii "ÐŸÑ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ð°Ñ ÑÑƒÐ¼Ð¼Ð° (Ð´Ð²Ð¾Ð¸Ñ‡Ð½Ð°Ñ):\n"
 105      D0BED0BC 
 105      D0B5D0B6 
 105      D183D182 
 105      D0BED187 
 105              	> 
 105              	>  strlen4 =. - str4
 105              	> 
 105              	> .text
 105 0108 B8040000 	>  movl $4,%eax
 105      00
 105 010d BB010000 	>  movl $1,%ebx
 105      00
 105 0112 B9090100 	>  movl $str4,%ecx
 105      00
 105 0117 BA3A0000 	>  movl $strlen4,%edx
 105      00
 105 011c CD80     	>  int $0x80
 106              	    # Ð’Ñ‹Ð²ÐµÑÑ‚Ð¸ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ ÑÑƒÐ¼Ð¼Ñƒ Ð² Ð´Ð²Ð¾Ð¸Ñ‡Ð½Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ
 107 011e E82C0100 	    call print_binary_sum
 107      00
 108              	
 109 0123 E906FFFF 	    jmp kbd_input               # Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
 109      FF
GAS LISTING task41.S 			page 6


 110              	
 111              	reset_and_continue:
 112              	    # Ð¡Ð±Ñ€Ð¾Ñ Ñ„Ð»Ð°Ð³Ð¾Ð² Ð¿Ñ€Ð¸ Ð¿ÑƒÑÑ‚Ð¾Ð¼ Enter
 113 0128 C6050200 	    movb $0, is_negative        # ÑÐ±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ñ„Ð»Ð°Ð³ Ð·Ð½Ð°ÐºÐ°
 113      000000
 114 012f E9FAFEFF 	    jmp kbd_input               # Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
 114      FF
 115              	
 116              	overflow_detected:
 117              	    Puts "Ð—Ð½Ð°ÐºÐ¾Ð²Ð¾Ðµ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ! Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½: -32768..32767"
 117              	> .data
 117 0143 D097D0BD 	>  str5:.ascii "Ð—Ð½Ð°ÐºÐ¾Ð²Ð¾Ðµ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ! Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½: -32768..32767\n"
 117      D0B0D0BA 
 117      D0BED0B2 
 117      D0BED0B5 
 117      20D0BFD0 
 117              	> 
 117              	>  strlen5 =. - str5
 117              	> 
 117              	> .text
 117 0134 B8040000 	>  movl $4,%eax
 117      00
 117 0139 BB010000 	>  movl $1,%ebx
 117      00
 117 013e B9430100 	>  movl $str5,%ecx
 117      00
 117 0143 BA4B0000 	>  movl $strlen5,%edx
 117      00
 117 0148 CD80     	>  int $0x80
 118              	    Exit $1                     # Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñƒ Ñ ÐºÐ¾Ð´Ð¾Ð¼ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ 
 118 014a B8010000 	>  movl $1,%eax
 118      00
 118 014f BB010000 	>  movl $1,%ebx
 118      00
 118 0154 CD80     	>  int $0x80
 119              	
 120              	# ÐŸÐ¾Ð´Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ ÑÑƒÐ¼Ð¼Ñ‹
 121              	print_current_sum:
 122              	    # Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹
 123 0156 50       	    pushl %eax
 124 0157 53       	    pushl %ebx
 125 0158 51       	    pushl %ecx
 126 0159 52       	    pushl %edx
 127 015a 57       	    pushl %edi
 128 015b 56       	    pushl %esi
 129              	
 130              	    # ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑƒÐ¼Ð¼Ñ‹ Ð² ÑÑ‚Ñ€Ð¾ÐºÑƒ
 131 015c 0FBF0500 	    movswl sum, %eax            # Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ ÑÑƒÐ¼Ð¼Ñƒ Ð² eax (ÑÐ¾ Ð·Ð½Ð°ÐºÐ¾Ð²Ñ‹Ð¼ Ñ€Ð°Ñ
 131      000000
 132 0163 BF080000 	    movl $output_buf, %edi      # ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ð° Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð±ÑƒÑ„ÐµÑ€Ð° Ð²Ñ‹Ð²Ð¾Ð´Ð°
 132      00
 133 0168 B90A0000 	    movl $10, %ecx              # Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ»ÑŒ = 10
 133      00
 134 016d BE000000 	    movl $0, %esi               # Ñ„Ð»Ð°Ð³ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾ Ñ‡Ð¸ÑÐ»Ð°
 134      00
 135              	    # Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº Ð¾Ñ‚ Ð´ÐµÐ»ÐµÐ½Ð¸Ñ 10. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ 123= 123\10= Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº 3; 12\10=
 136              	
GAS LISTING task41.S 			page 7


 137              	    # ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°: Ñ‡Ð¸ÑÐ»Ð¾ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ?
 138 0172 83F800   	    cmpl $0, %eax
 139 0175 7D07     	    jge check_zero_sum          # ÐµÑÐ»Ð¸ >= 0, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ð° Ð½Ð¾Ð»ÑŒ
 140              	
 141              	    # Ð§Ð¸ÑÐ»Ð¾ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ - ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð¸ Ð±ÐµÑ€ÐµÐ¼ Ð°Ð±ÑÐ¾Ð»Ñ
 142 0177 BE010000 	    movl $1, %esi               # ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ñ„Ð»Ð°Ð³ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾
 142      00
 143 017c F7D8     	    negl %eax                   # eax = -eax (Ð°Ð±ÑÐ¾Ð»ÑŽÑ‚Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ)
 144              	
 145              	check_zero_sum:
 146              	    # Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐ»ÑƒÑ‡Ð°Ð¹: ÐµÑÐ»Ð¸ ÑÑƒÐ¼Ð¼Ð° = 0
 147 017e 83F800   	    cmpl $0, %eax
 148 0181 7506     	    jne convert_sum_loop
 149              	
 150              	    # Ð’Ñ‹Ð²Ð¾Ð´ "0" ÐµÑÐ»Ð¸ ÑÑƒÐ¼Ð¼Ð° Ñ€Ð°Ð²Ð½Ð° 0
 151 0183 C60730   	    movb $'0', (%edi)
 152 0186 47       	    incl %edi
 153 0187 EB2E     	    jmp add_newline_sum
 154              	
 155              	convert_sum_loop:
 156 0189 BB000000 	    movl $0, %ebx               # Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑ‡ÐµÑ‚Ñ‡Ð¸ÐºÐ° Ñ†Ð¸Ñ„Ñ€
 156      00
 157              	
 158              	convert_sum_loop_body:
 159              	    # Ð”ÐµÐ»Ð¸Ð¼ Ñ‡Ð¸ÑÐ»Ð¾ Ð½Ð° 10, Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº (Ñ†Ð¸Ñ„Ñ€Ñƒ)
 160 018e BA000000 	    movl $0, %edx               # Ð¾Ð±Ð½ÑƒÐ»ÑÐµÐ¼ edx Ð¿ÐµÑ€ÐµÐ´ Ð´ÐµÐ»ÐµÐ½Ð¸ÐµÐ¼
 160      00
 161 0193 F7F1     	    divl %ecx                   # eax = eax / 10, edx = Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº
 162              	
 163              	    # ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÐ¼ Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº Ð² ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¸ Ð¿Ð¾Ð¼ÐµÑ‰Ð°ÐµÐ¼ Ð² ÑÑ‚ÐµÐº
 164 0195 83C230   	    addl $'0', %edx             # Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ†Ð¸Ñ„Ñ€Ñƒ Ð² ÐºÐ¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
 165 0198 52       	    pushl %edx                  # ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð² ÑÑ‚ÐµÐº
 166              	
 167 0199 43       	    incl %ebx                   # ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº Ñ†Ð¸Ñ„Ñ€
 168              	
 169 019a 83F800   	    cmpl $0, %eax               # Ñ‡Ð°ÑÑ‚Ð½Ð¾Ðµ = 0?
 170 019d 75EF     	    jne convert_sum_loop_body   # ÐÐ•Ð¢ - Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÐ¼ Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ
 171              	
 172              	    # Ð˜Ð·Ð²Ð»ÐµÐºÐ°ÐµÐ¼ Ñ†Ð¸Ñ„Ñ€Ñ‹ Ð¸Ð· ÑÑ‚ÐµÐºÐ° Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¼ Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ
 173 019f BF080000 	    movl $output_buf, %edi      # ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ð° Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð±ÑƒÑ„ÐµÑ€Ð°
 173      00
 174              	
 175              	    # Ð•ÑÐ»Ð¸ Ñ‡Ð¸ÑÐ»Ð¾ Ð±Ñ‹Ð»Ð¾ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼, Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¼Ð¸Ð½ÑƒÑ
 176 01a4 83FE01   	    cmpl $1, %esi               # Ñ‡Ð¸ÑÐ»Ð¾ Ð±Ñ‹Ð»Ð¾ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼?
 177 01a7 7504     	    jne extract_sum_digits      # ÐÐ•Ð¢ - Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ðº Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸ÑŽ Ñ†Ð¸Ñ„Ñ€
 178              	
 179 01a9 C6072D   	    movb $'-', (%edi)           # Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¼Ð¸Ð½ÑƒÑ
 180 01ac 47       	    incl %edi                   # ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ
 181              	
 182              	extract_sum_digits:
 183 01ad 58       	    popl %eax                   # Ð¸Ð·Ð²Ð»ÐµÐºÐ°ÐµÐ¼ ÐºÐ¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° Ð¸Ð· ÑÑ‚ÐµÐºÐ°
 184 01ae 8807     	    movb %al, (%edi)            # Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ð² Ð±ÑƒÑ„ÐµÑ€
 185 01b0 47       	    incl %edi                   # ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ Ð² Ð±ÑƒÑ„ÐµÑ€Ðµ
 186 01b1 4B       	    decl %ebx                   # ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÐ¼ ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº
 187 01b2 83FB00   	    cmpl $0, %ebx               # Ð²ÑÐµ Ñ†Ð¸Ñ„Ñ€Ñ‹ Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ñ‹?
 188 01b5 75F6     	    jne extract_sum_digits      # ÐÐ•Ð¢ - Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÐ¼
 189              	
GAS LISTING task41.S 			page 8


 190              	add_newline_sum:
 191 01b7 C6070A   	    movb $'\n', (%edi)          # Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´ ÑÑ‚Ñ€Ð¾ÐºÐ¸
 192 01ba 47       	    incl %edi                   # ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ
 193              	
 194              	    # Ð’Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ð´Ð»Ð¸Ð½Ñƒ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°
 195 01bb B8080000 	    movl $output_buf, %eax      # Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð±ÑƒÑ„ÐµÑ€Ð°
 195      00
 196 01c0 89FA     	    movl %edi, %edx             # Ñ‚ÐµÐºÑƒÑ‰Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ (ÐºÐ¾Ð½ÐµÑ† ÑÑ‚Ñ€Ð¾ÐºÐ¸)
 197 01c2 29C2     	    subl %eax, %edx             # Ð´Ð»Ð¸Ð½Ð° = ÐºÐ¾Ð½ÐµÑ† - Ð½Ð°Ñ‡Ð°Ð»Ð¾
 198              	
 199              	    # Ð’Ñ‹Ð²Ð¾Ð´ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°
 200 01c4 B8040000 	    movl $4, %eax               # Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ð° write
 200      00
 201 01c9 BB010000 	    movl $1, %ebx               # Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ stdout
 201      00
 202 01ce B9080000 	    movl $output_buf, %ecx      # Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð°
 202      00
 203              	    # edx ÑƒÐ¶Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð´Ð»Ð¸Ð½Ñƒ
 204 01d3 CD80     	    int $0x80                   # Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
 205              	
 206              	    # Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹
 207 01d5 5E       	    popl %esi
 208 01d6 5F       	    popl %edi
 209 01d7 5A       	    popl %edx
 210 01d8 59       	    popl %ecx
 211 01d9 5B       	    popl %ebx
 212 01da 58       	    popl %eax
 213              	
 214 01db C3       	    ret
 215              	
 216              	# ÐŸÐ¾Ð´Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ ÑÑƒÐ¼Ð¼Ñ‹ Ð² Ð²Ð¾ÑÐ¼ÐµÑ€Ð¸Ñ‡Ð½Ð¾Ð¹ 
 217              	# Ð”Ð»Ñ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ñ‡Ð¸ÑÐµÐ» Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑÑ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÐºÐ¾
 218              	print_octal_sum:
 219              	    # Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹
 220 01dc 50       	    pushl %eax
 221 01dd 53       	    pushl %ebx
 222 01de 51       	    pushl %ecx
 223 01df 52       	    pushl %edx
 224 01e0 57       	    pushl %edi
 225 01e1 56       	    pushl %esi
 226              	
 227              	    # ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑƒÐ¼Ð¼Ñ‹ Ð² Ð²Ð¾ÑÐ¼ÐµÑ€Ð¸Ñ‡Ð½ÑƒÑŽ ÑÑ‚Ñ€Ð¾ÐºÑƒ
 228 01e2 0FBF3500 	    movswl sum, %esi            # Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð·Ð½Ð°ÐºÐ¾Ð²ÑƒÑŽ ÑÑƒÐ¼Ð¼Ñƒ Ð² esi Ð´Ð»Ñ Ð¿Ñ€
 228      000000
 229 01e9 0FB70500 	    movzwl sum, %eax            # Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ ÑÑƒÐ¼Ð¼Ñƒ Ð² eax ÐºÐ°Ðº Ð±ÐµÐ·Ð·Ð½Ð°ÐºÐ¾Ð²Ð¾Ð
 229      000000
 230 01f0 BF080000 	    movl $output_buf, %edi      # ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ð° Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð±ÑƒÑ„ÐµÑ€Ð° Ð²Ñ‹Ð²Ð¾Ð´Ð°
 230      00
 231 01f5 B9080000 	    movl $8, %ecx               # Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ»ÑŒ = 8 (Ð²Ð¾ÑÐ¼ÐµÑ€Ð¸Ñ‡Ð½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°)
 231      00
 232              	
 233              	    # Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐ»ÑƒÑ‡Ð°Ð¹: ÐµÑÐ»Ð¸ ÑÑƒÐ¼Ð¼Ð° = 0
 234 01fa 83F800   	    cmpl $0, %eax
 235 01fd 7506     	    jne convert_octal_loop
 236              	
 237              	    # Ð’Ñ‹Ð²Ð¾Ð´ "0" ÐµÑÐ»Ð¸ ÑÑƒÐ¼Ð¼Ð° Ñ€Ð°Ð²Ð½Ð° 0
 238 01ff C60730   	    movb $'0', (%edi)
GAS LISTING task41.S 			page 9


 239 0202 47       	    incl %edi
 240 0203 EB25     	    jmp add_newline_octal
 241              	
 242              	convert_octal_loop:
 243 0205 BB000000 	    movl $0, %ebx               # Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑ‡ÐµÑ‚Ñ‡Ð¸ÐºÐ° Ñ†Ð¸Ñ„Ñ€
 243      00
 244              	
 245              	convert_octal_loop_body:
 246              	    # Ð”ÐµÐ»Ð¸Ð¼ Ñ‡Ð¸ÑÐ»Ð¾ Ð½Ð° 8, Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº (Ð²Ð¾ÑÐ¼ÐµÑ€Ð¸Ñ‡Ð½ÑƒÑŽ Ñ†Ð¸Ñ„Ñ
 247 020a BA000000 	    movl $0, %edx               # Ð¾Ð±Ð½ÑƒÐ»ÑÐµÐ¼ edx Ð¿ÐµÑ€ÐµÐ´ Ð´ÐµÐ»ÐµÐ½Ð¸ÐµÐ¼
 247      00
 248 020f F7F1     	    divl %ecx                   # eax = eax / 8, edx = Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº (0-7)
 249              	
 250              	    # ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÐ¼ Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº Ð² ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¸ Ð¿Ð¾Ð¼ÐµÑ‰Ð°ÐµÐ¼ Ð² ÑÑ‚ÐµÐº
 251 0211 83C230   	    addl $'0', %edx             # Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ†Ð¸Ñ„Ñ€Ñƒ Ð² ÐºÐ¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
 252 0214 52       	    pushl %edx                  # ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð² ÑÑ‚ÐµÐº
 253              	
 254 0215 43       	    incl %ebx                   # ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº Ñ†Ð¸Ñ„Ñ€
 255              	
 256 0216 83F800   	    cmpl $0, %eax               # Ñ‡Ð°ÑÑ‚Ð½Ð¾Ðµ = 0?
 257 0219 75EF     	    jne convert_octal_loop_body # ÐÐ•Ð¢ - Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÐ¼ Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ
 258              	
 259              	    # Ð˜Ð·Ð²Ð»ÐµÐºÐ°ÐµÐ¼ Ñ†Ð¸Ñ„Ñ€Ñ‹ Ð¸Ð· ÑÑ‚ÐµÐºÐ° Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¼ Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ
 260 021b BF080000 	    movl $output_buf, %edi      # ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ð° Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð±ÑƒÑ„ÐµÑ€Ð°
 260      00
 261              	
 262              	extract_octal_digits:
 263 0220 58       	    popl %eax                   # Ð¸Ð·Ð²Ð»ÐµÐºÐ°ÐµÐ¼ ÐºÐ¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° Ð¸Ð· ÑÑ‚ÐµÐºÐ°
 264 0221 8807     	    movb %al, (%edi)            # Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ð² Ð±ÑƒÑ„ÐµÑ€
 265 0223 47       	    incl %edi                   # ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ Ð² Ð±ÑƒÑ„ÐµÑ€Ðµ
 266 0224 4B       	    decl %ebx                   # ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÐ¼ ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº
 267 0225 83FB00   	    cmpl $0, %ebx               # Ð²ÑÐµ Ñ†Ð¸Ñ„Ñ€Ñ‹ Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ñ‹?
 268 0228 75F6     	    jne extract_octal_digits    # ÐÐ•Ð¢ - Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÐ¼
 269              	
 270              	add_newline_octal:
 271 022a C6070A   	    movb $'\n', (%edi)          # Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´ ÑÑ‚Ñ€Ð¾ÐºÐ¸
 272 022d 47       	    incl %edi                   # ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ
 273              	
 274              	    # Ð’Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ð´Ð»Ð¸Ð½Ñƒ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°
 275 022e B8080000 	    movl $output_buf, %eax      # Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð±ÑƒÑ„ÐµÑ€Ð°
 275      00
 276 0233 89FA     	    movl %edi, %edx             # Ñ‚ÐµÐºÑƒÑ‰Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ (ÐºÐ¾Ð½ÐµÑ† ÑÑ‚Ñ€Ð¾ÐºÐ¸)
 277 0235 29C2     	    subl %eax, %edx             # Ð´Ð»Ð¸Ð½Ð° = ÐºÐ¾Ð½ÐµÑ† - Ð½Ð°Ñ‡Ð°Ð»Ð¾
 278              	
 279              	    # Ð’Ñ‹Ð²Ð¾Ð´ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°
 280 0237 B8040000 	    movl $4, %eax               # Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ð° write
 280      00
 281 023c BB010000 	    movl $1, %ebx               # Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ stdout
 281      00
 282 0241 B9080000 	    movl $output_buf, %ecx      # Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð°
 282      00
 283              	    # edx ÑƒÐ¶Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð´Ð»Ð¸Ð½Ñƒ
 284 0246 CD80     	    int $0x80                   # Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
 285              	
 286              	    # Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹
 287 0248 5E       	    popl %esi
 288 0249 5F       	    popl %edi
GAS LISTING task41.S 			page 10


 289 024a 5A       	    popl %edx
 290 024b 59       	    popl %ecx
 291 024c 5B       	    popl %ebx
 292 024d 58       	    popl %eax
 293              	
 294 024e C3       	    ret
 295              	
 296              	# ÐŸÐ¾Ð´Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ ÑÑƒÐ¼Ð¼Ñ‹ Ð² Ð´Ð²Ð¾Ð¸Ñ‡Ð½Ð¾Ð¹ ÑÐ¸Ñ
 297              	# Ð”Ð»Ñ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ñ‡Ð¸ÑÐµÐ» Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑÑ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÐºÐ¾
 298              	print_binary_sum:
 299              	    # Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹
 300 024f 50       	    pushl %eax
 301 0250 53       	    pushl %ebx
 302 0251 51       	    pushl %ecx
 303 0252 52       	    pushl %edx
 304 0253 57       	    pushl %edi
 305 0254 56       	    pushl %esi
 306              	
 307              	    # ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑƒÐ¼Ð¼Ñ‹ Ð² Ð´Ð²Ð¾Ð¸Ñ‡Ð½ÑƒÑŽ ÑÑ‚Ñ€Ð¾ÐºÑƒ
 308 0255 0FBF3500 	    movswl sum, %esi            # Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð·Ð½Ð°ÐºÐ¾Ð²ÑƒÑŽ ÑÑƒÐ¼Ð¼Ñƒ Ð² esi Ð´Ð»Ñ Ð¿Ñ€
 308      000000
 309 025c 0FB70500 	    movzwl sum, %eax            # Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ ÑÑƒÐ¼Ð¼Ñƒ Ð² eax ÐºÐ°Ðº Ð±ÐµÐ·Ð·Ð½Ð°ÐºÐ¾Ð²Ð¾Ð
 309      000000
 310 0263 BF080000 	    movl $output_buf, %edi      # ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ð° Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð±ÑƒÑ„ÐµÑ€Ð° Ð²Ñ‹Ð²Ð¾Ð´Ð°
 310      00
 311              	
 312              	    # Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐ»ÑƒÑ‡Ð°Ð¹: ÐµÑÐ»Ð¸ ÑÑƒÐ¼Ð¼Ð° = 0
 313 0268 83F800   	    cmpl $0, %eax
 314 026b 7506     	    jne convert_binary_loop
 315              	
 316              	    # Ð’Ñ‹Ð²Ð¾Ð´ "0" ÐµÑÐ»Ð¸ ÑÑƒÐ¼Ð¼Ð° Ñ€Ð°Ð²Ð½Ð° 0
 317 026d C60730   	    movb $'0', (%edi)
 318 0270 47       	    incl %edi
 319 0271 EB25     	    jmp add_newline_binary
 320              	
 321              	convert_binary_loop:
 322 0273 BB000000 	    movl $0, %ebx               # Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑ‡ÐµÑ‚Ñ‡Ð¸ÐºÐ° Ð±Ð¸Ñ‚Ð¾Ð²
 322      00
 323              	
 324              	convert_binary_loop_body:
 325              	    # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¼Ð»Ð°Ð´ÑˆÐ¸Ð¹ Ð±Ð¸Ñ‚
 326 0278 89C2     	    movl %eax, %edx             # ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ñ‡Ð¸ÑÐ»Ð¾ Ð² edx
 327 027a 83E201   	    andl $1, %edx               # Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¼Ð»Ð°Ð´ÑˆÐ¸Ð¹ Ð±Ð¸Ñ‚ (0 Ð¸Ð»Ð¸ 1)
 328              	
 329              	    # ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÐ¼ Ð±Ð¸Ñ‚ Ð² ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¸ Ð¿Ð¾Ð¼ÐµÑ‰Ð°ÐµÐ¼ Ð² ÑÑ‚ÐµÐº
 330 027d 83C230   	    addl $'0', %edx             # Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ð±Ð¸Ñ‚ Ð² ÐºÐ¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° ('0' Ð
 331 0280 52       	    pushl %edx                  # ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð² ÑÑ‚ÐµÐº
 332              	
 333 0281 43       	    incl %ebx                   # ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº Ð±Ð¸Ñ‚Ð¾Ð²
 334              	
 335 0282 D1E8     	    shrl $1, %eax               # ÑÐ´Ð²Ð¸Ð³Ð°ÐµÐ¼ Ñ‡Ð¸ÑÐ»Ð¾ Ð²Ð¿Ñ€Ð°Ð²Ð¾ Ð½Ð° 1 Ð±Ð¸Ñ‚
 336              	
 337 0284 83F800   	    cmpl $0, %eax               # Ñ‡Ð¸ÑÐ»Ð¾ = 0?
 338 0287 75EF     	    jne convert_binary_loop_body # ÐÐ•Ð¢ - Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÐ¼
 339              	
 340              	    # Ð˜Ð·Ð²Ð»ÐµÐºÐ°ÐµÐ¼ Ð±Ð¸Ñ‚Ñ‹ Ð¸Ð· ÑÑ‚ÐµÐºÐ° Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¼ Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ
 341 0289 BF080000 	    movl $output_buf, %edi      # ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ð° Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð±ÑƒÑ„ÐµÑ€Ð°
GAS LISTING task41.S 			page 11


 341      00
 342              	
 343              	extract_binary_digits:
 344 028e 58       	    popl %eax                   # Ð¸Ð·Ð²Ð»ÐµÐºÐ°ÐµÐ¼ ÐºÐ¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° Ð¸Ð· ÑÑ‚ÐµÐºÐ°
 345 028f 8807     	    movb %al, (%edi)            # Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ð² Ð±ÑƒÑ„ÐµÑ€
 346 0291 47       	    incl %edi                   # ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ Ð² Ð±ÑƒÑ„ÐµÑ€Ðµ
 347 0292 4B       	    decl %ebx                   # ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÐ¼ ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº
 348 0293 83FB00   	    cmpl $0, %ebx               # Ð²ÑÐµ Ð±Ð¸Ñ‚Ñ‹ Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ñ‹?
 349 0296 75F6     	    jne extract_binary_digits   # ÐÐ•Ð¢ - Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÐ¼
 350              	
 351              	add_newline_binary:
 352 0298 C6070A   	    movb $'\n', (%edi)          # Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´ ÑÑ‚Ñ€Ð¾ÐºÐ¸
 353 029b 47       	    incl %edi                   # ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÐ¼ ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ
 354              	
 355              	    # Ð’Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ð´Ð»Ð¸Ð½Ñƒ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°
 356 029c B8080000 	    movl $output_buf, %eax      # Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð±ÑƒÑ„ÐµÑ€Ð°
 356      00
 357 02a1 89FA     	    movl %edi, %edx             # Ñ‚ÐµÐºÑƒÑ‰Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ (ÐºÐ¾Ð½ÐµÑ† ÑÑ‚Ñ€Ð¾ÐºÐ¸)
 358 02a3 29C2     	    subl %eax, %edx             # Ð´Ð»Ð¸Ð½Ð° = ÐºÐ¾Ð½ÐµÑ† - Ð½Ð°Ñ‡Ð°Ð»Ð¾
 359              	
 360              	    # Ð’Ñ‹Ð²Ð¾Ð´ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°
 361 02a5 B8040000 	    movl $4, %eax               # Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ð° write
 361      00
 362 02aa BB010000 	    movl $1, %ebx               # Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ stdout
 362      00
 363 02af B9080000 	    movl $output_buf, %ecx      # Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð°
 363      00
 364              	    # edx ÑƒÐ¶Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð´Ð»Ð¸Ð½Ñƒ
 365 02b4 CD80     	    int $0x80                   # Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
 366              	
 367              	    # Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹
 368 02b6 5E       	    popl %esi
 369 02b7 5F       	    popl %edi
 370 02b8 5A       	    popl %edx
 371 02b9 59       	    popl %ecx
 372 02ba 5B       	    popl %ebx
 373 02bb 58       	    popl %eax
 374              	
 375 02bc C3       	    ret
 376              	
 377              	print_result:
 378              	    Puts "Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹. Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ð°Ñ ÑÑƒÐ¼Ð¼Ð° (Ð´ÐµÑÑÑ‚Ð¸Ñ‡Ð½Ð°Ñ):"
 378              	> .data
 378 018e D097D0B0 	>  str7:.ascii "Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹. Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ð°Ñ ÑÑƒÐ¼Ð¼Ð° (Ð´ÐµÑÑÑ‚Ð¸Ñ‡Ð½Ð°Ñ):\n"
 378      D0B2D0B5 
 378      D180D188 
 378      D0B5D0BD 
 378      D0B8D0B5 
 378              	> 
 378              	>  strlen7 =. - str7
 378              	> 
 378              	> .text
 378 02bd B8040000 	>  movl $4,%eax
 378      00
 378 02c2 BB010000 	>  movl $1,%ebx
 378      00
 378 02c7 B98E0100 	>  movl $str7,%ecx
GAS LISTING task41.S 			page 12


 378      00
 378 02cc BA570000 	>  movl $strlen7,%edx
 378      00
 378 02d1 CD80     	>  int $0x80
 379 02d3 E87EFEFF 	    call print_current_sum
 379      FF
 380              	
 381              	    Puts "Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ð°Ñ ÑÑƒÐ¼Ð¼Ð° (Ð²Ð¾ÑÐ¼ÐµÑ€Ð¸Ñ‡Ð½Ð°Ñ):"
 381              	> .data
 381 01e5 D098D182 	>  str8:.ascii "Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ð°Ñ ÑÑƒÐ¼Ð¼Ð° (Ð²Ð¾ÑÐ¼ÐµÑ€Ð¸Ñ‡Ð½Ð°Ñ):\n"
 381      D0BED0B3 
 381      D0BED0B2 
 381      D0B0D18F 
 381      20D181D1 
 381              	> 
 381              	>  strlen8 =. - str8
 381              	> 
 381              	> .text
 381 02d8 B8040000 	>  movl $4,%eax
 381      00
 381 02dd BB010000 	>  movl $1,%ebx
 381      00
 381 02e2 B9E50100 	>  movl $str8,%ecx
 381      00
 381 02e7 BA360000 	>  movl $strlen8,%edx
 381      00
 381 02ec CD80     	>  int $0x80
 382 02ee E8E9FEFF 	    call print_octal_sum
 382      FF
 383              	
 384              	    Puts "Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ð°Ñ ÑÑƒÐ¼Ð¼Ð° (Ð´Ð²Ð¾Ð¸Ñ‡Ð½Ð°Ñ):"
 384              	> .data
 384 021b D098D182 	>  str9:.ascii "Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ð°Ñ ÑÑƒÐ¼Ð¼Ð° (Ð´Ð²Ð¾Ð¸Ñ‡Ð½Ð°Ñ):\n"
 384      D0BED0B3 
 384      D0BED0B2 
 384      D0B0D18F 
 384      20D181D1 
 384              	> 
 384              	>  strlen9 =. - str9
 384              	> 
 384              	> .text
 384 02f3 B8040000 	>  movl $4,%eax
 384      00
 384 02f8 BB010000 	>  movl $1,%ebx
 384      00
 384 02fd B91B0200 	>  movl $str9,%ecx
 384      00
 384 0302 BA300000 	>  movl $strlen9,%edx
 384      00
 384 0307 CD80     	>  int $0x80
 385 0309 E841FFFF 	    call print_binary_sum
 385      FF
 386              	
 387              	    Exit $0                     # Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñƒ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾
 387 030e B8010000 	>  movl $1,%eax
 387      00
 387 0313 BB000000 	>  movl $0,%ebx
GAS LISTING task41.S 			page 13


 387      00
 387 0318 CD80     	>  int $0x80
 388              	
 389              	.end
GAS LISTING task41.S 			page 14


DEFINED SYMBOLS
                             .bss:00000000 c
            task41.S:10     .bss:00000001 last_digit
            task41.S:11     .bss:00000002 is_negative
            task41.S:13     .bss:00000008 output_buf
            task41.S:18     .data:00000000 sum
            task41.S:23     .text:00000000 _start
            task41.S:30     .data:00000002 str0
            task41.S:30     *ABS*:00000089 strlen0
            task41.S:32     .text:0000002e kbd_input
            task41.S:377    .text:000002bd print_result
            task41.S:61     .text:00000086 process_enter
            task41.S:56     .text:0000007d process_minus
            task41.S:111    .text:00000128 reset_and_continue
            task41.S:78     .text:000000a4 add_to_sum
            task41.S:116    .text:00000134 overflow_detected
            task41.S:97     .data:0000008b str2
            task41.S:97     *ABS*:0000003e strlen2
            task41.S:121    .text:00000156 print_current_sum
            task41.S:101    .data:000000c9 str3
            task41.S:101    *ABS*:00000040 strlen3
            task41.S:218    .text:000001dc print_octal_sum
            task41.S:105    .data:00000109 str4
            task41.S:105    *ABS*:0000003a strlen4
            task41.S:298    .text:0000024f print_binary_sum
            task41.S:117    .data:00000143 str5
            task41.S:117    *ABS*:0000004b strlen5
            task41.S:145    .text:0000017e check_zero_sum
            task41.S:155    .text:00000189 convert_sum_loop
            task41.S:190    .text:000001b7 add_newline_sum
            task41.S:158    .text:0000018e convert_sum_loop_body
            task41.S:182    .text:000001ad extract_sum_digits
            task41.S:242    .text:00000205 convert_octal_loop
            task41.S:270    .text:0000022a add_newline_octal
            task41.S:245    .text:0000020a convert_octal_loop_body
            task41.S:262    .text:00000220 extract_octal_digits
            task41.S:321    .text:00000273 convert_binary_loop
            task41.S:351    .text:00000298 add_newline_binary
            task41.S:324    .text:00000278 convert_binary_loop_body
            task41.S:343    .text:0000028e extract_binary_digits
            task41.S:378    .data:0000018e str7
            task41.S:378    *ABS*:00000057 strlen7
            task41.S:381    .data:000001e5 str8
            task41.S:381    *ABS*:00000036 strlen8
            task41.S:384    .data:0000021b str9
            task41.S:384    *ABS*:00000030 strlen9

NO UNDEFINED SYMBOLS
